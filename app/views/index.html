{% extends 'layouts/default.html' %}

{% block head %}

  <script src="/components/webcomponentsjs/webcomponents.js"></script>
  <link rel="import" href="/components/polymer/polymer.html">
  <link rel="import" href="/components/core-elements/core-elements.html">
  <link rel="import" href="/components/paper-elements/paper-elements.html">
  <link rel="import" href="/components/font-roboto/roboto.html">

  <style>

    html, body {
      height: 100%;
      margin: 0;
    }

    body {
      font-family: RobotoDraft, 'Helvetica Neue', Helvetica, Arial;
    }

    .dark-primary-color    { background: #7B1FA2; }
    .default-primary-color { background: #9C27B0; }
    .light-primary-color   { background: #E1BEE7; }
    .text-primary-color    { color: #FFFFFF; }
    .accent-color          { background: #7C4DFF; }
    .primary-text-color    { color: #212121; }
    .secondary-text-color  { color: #727272; }
    .divider-color         { border-color: #B6B6B6; }

    core-scaffold {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    }

    .content {
      /*background-color: #fff;*/
      padding: 20px;
    }

    paper-item {
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    paper-button.default {
      color: #444;
    }

    paper-button[raised].default {
      background: #fff;
      color: #444;
    }


    paper-button.facebook {
      color: #3b5998;
    }

    paper-button[raised].facebook {
      background: #3b5998;
      color: #fff;
    }


    paper-button.twitter {
      color: #00aced;
    }

    paper-button[raised].twitter {
      background: #00aced;
      color: #fff;
    }

    paper-button.google {
      color: #dd4b39;
    }

    paper-button[raised].google {
      background: #dd4b39;
      color: #fff;
    }

    html /deep/ paper-item core-icon {
      margin-right: 0.5em;
    }

    html /deep/ paper-dropdown core-menu {
      margin: 0;
    }

    html /deep/ a.nolink {
      color: inherit;
      text-decoration: inherit;
    }

    paper-button:hover, paper-button.active {
      text-decoration: none;
      background: #fff;
      box-shadow: 0px 4px 10px 0 rgba(0,0,0,0.1),0px 2px 10px 0px rgba(0,0,0,0.1);
    }

    paper-toast {
      right: 10px;
      left: auto;
    }

    paper-toast.message.error {
      color: #F44336;
    }

    paper-toast.message.success {
      color: #8BC34A;
    }

    paper-toast.message.warning {
      color: #FF9800;
    }

  </style>
{% endblock %}

{% block content %}


<core-scaffold>

  <core-header-panel navigation flex>
    <core-toolbar id="navheader">
      <span>Menu</span>
    </core-toolbar>
    <core-menu>
      <core-item label="One"></core-item>
      <core-item label="Two"></core-item>
    </core-menu>
  </core-header-panel>

  <span tool>ProtoPixel Polymer</span>

  <span tool flex></span>

 <paper-menu-button tool>
    <paper-icon-button icon="more-vert"></paper-icon-button>
    <paper-dropdown class="dropdown" layered i-relatedTarget="{{$.trigger}}" halign="right" transition="">
      <core-menu class="menu">
        <a href="#profile" class="nolink"><paper-item>
          <core-icon icon="account-circle"></core-icon>
          Profile
        </paper-item></a>
        <a href="{{ROUTES.AUTH_LOGOUT}}" class="nolink"><paper-item>
          <core-icon icon="close"></core-icon>
          Logout
        </paper-item></a>
        <!-- <paper-item><a href="#profile" layout horizontal center>
          <core-icon icon="account-circle"></core-icon>
          Profile
        </a></paper-item> -->
      </core-menu>
    </paper-dropdown>
  </paper-menu-button>

  <div class="content">

    <!-- {% if messages.error.length %}
    <div class="alert alert-danger">
      {{messages.error|join("<br>"|safe)}}
    </div>
    {% endif %} -->

    <!-- {#% if messages.success %}
    <div class="alert alert-success">
      {{messages.success|join("<br>"|safe)}}
    </div>
    {% endif %#} -->

    <!-- {#% if !user.isValid %}
    <div class="alert alert-warning">
      Please verify your account.
    </div>
    {% endif %#} -->

    <h3>Welcome {{user.name}}!</h3>

    <hr>

    <div>

    {% if !user.local.connected and !user.local.signup %}
      <a href="{{ROUTES.AUTH_LINK}}"><paper-button raised class="default">Link Email</paper-button></a>
    {% else %}
      <a href="{{ROUTES.AUTH_UNLINK}}"><paper-button class="default"><strong>Un</strong>link Email</paper-button></a>
    {% endif %}

    {% if !user.facebook.id %}
      <a href="{{ROUTES.AUTH_LINK}}/facebook"><paper-button raised class="facebook">Link Facebook</paper-button></a>
    {% else %}
      <a href="{{ROUTES.AUTH_UNLINK}}/facebook"><paper-button class="facebook"><strong>Un</strong>link Facebook</paper-button></a>
    {% endif %}

    {% if !user.twitter.id %}
      <a href="{{ROUTES.AUTH_LINK}}/twitter"><paper-button raised class="twitter">Link Twitter</paper-button></a>
    {% else %}
      <a href="{{ROUTES.AUTH_UNLINK}}/twitter"><paper-button class="twitter"><strong>Un</strong>link Twitter</paper-button></a>
    {% endif %}

    {% if !user.google.id %}
      <a href="{{ROUTES.AUTH_LINK}}/google"><paper-button raised class="google">Link Google</paper-button></a>
    {% else %}
      <a href="{{ROUTES.AUTH_UNLINK}}/google"><paper-button class="google"><strong>Un</strong>link Google</paper-button></a>
    {% endif %}

    </div>
  </div>
</core-scaffold>

{% if messages.error.length %}
{% for key, message in messages.error %}
<paper-toast class="message error" text="{{message}}" autoCloseDisabled="true"></paper-toast>
{% endfor %}
{% endif %}

{% if messages.success.length %}
{% for key, message in messages.success %}
<paper-toast class="message success" text="{{message}}"></paper-toast>
{% endfor %}
{% endif %}

{% if !user.isValid %}
<paper-toast class="message warning" text="Please verify your account.">
  <a href="#" style="color: white;" class="nolink">Resend Email</a>
</paper-toast>
{% endif %}

<script type="text/javascript">
  window.addEventListener('polymer-ready', function(e) {
    Array.prototype.slice.apply(document.querySelectorAll('paper-toast.message')).forEach(function(e,i){
      setTimeout(function(){
        e.show()
      }, i * 3000);
    });
  });
</script>

{% endblock %}
